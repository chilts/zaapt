%# ----------------------------------------------------------------------------
<%once>
    use Zaapt::Utils::UrlSet;
</%once>
%# ----------------------------------------------------------------------------
<%args>
    $zaapt
    $b_name
    $location
</%args>
%# ----------------------------------------------------------------------------
<%init>
    my $model = $zaapt->get_model('Blog');
    my $blog = $model->sel_blog_using_name({ b_name => $b_name });
    unless ( defined $blog ) {
        die "Blog '$b_name' not found.";
        return;
    }
    my $entries = $model->sel_entry_all_in({ b_id => $blog->{b_id} });

    my $urlset = Zaapt::Utils::UrlSet->new();
    foreach my $entry ( @$entries ) {
        $urlset->add({ loc => $location . "/$entry->{e_name}.html" });
    }

    print $urlset->as_xml();
    return;
</%init>
%# ----------------------------------------------------------------------------
