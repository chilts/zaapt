%# ----------------------------------------------------------------------------
<%args>
    $zaapt
    $g_name
    $page
</%args>
%# ----------------------------------------------------------------------------
<%init>
    # figure out what we're looking at
    if ( $page eq 'index' ) {
        $m->comp('/zaapt/model/gallery/view-index.mhtml', zaapt => $zaapt, g_name => $g_name);
    }
    elsif ( $page =~ m{ \A picture: (.*) \z}xms ) {
        $m->comp('/zaapt/model/gallery/view-picture.mhtml', zaapt => $zaapt, g_name => $g_name, p_name => $1);
    }
    else {
        # don't know what this page is
        $m->clear_buffer();
        $m->abort(404);
    }
    return;
</%init>
%# ----------------------------------------------------------------------------
