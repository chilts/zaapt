%# ----------------------------------------------------------------------------
<%args>
    $zaapt
    $my_perms
    $i_id
</%args>
%# ----------------------------------------------------------------------------
<%init>
    my $model = $zaapt->get_model('Menu');
    my $item = $model->sel_item({ i_id => $i_id });

    # we need to have this item available for it to be deleted
    $m->redirect('edit.html') unless defined $item;

    # this user can only delete items if they have admin privileges
    $m->redirect('edit.html') unless exists $my_perms->{$item->{_admin}};

    $model->del_item({ i_id => $i_id });
    $m->redirect("edit_i_list.html?m_id=$item->{m_id}");
    return;
</%init>
%# ----------------------------------------------------------------------------
